<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <title>UIViewController | Mou</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.0.3">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    
    <link rel="next" href="../delegate_kvo/README.html" />
    
    
    <link rel="prev" href="../touchid/README.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">


        
    <div class="book"  data-level="19" data-basepath=".." data-revision="1462863912916">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                         Markdown语法
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="base/README.html">
            
                
                    <a href="../base/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         base
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="uiview/README.html">
            
                
                    <a href="../uiview/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         UIView
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="jiugongge/README.html">
            
                
                    <a href="../jiugongge/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         jiugongge
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4" data-path="uiscrollview/README.html">
            
                
                    <a href="../uiscrollview/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                         UIScrollView
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5" data-path="uitableview/README.html">
            
                
                    <a href="../uitableview/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                         UITableView
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6" data-path="autolayout/README.html">
            
                
                    <a href="../autolayout/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                         autolayout
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7" data-path="map/README.html">
            
                
                    <a href="../map/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                         map
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8" data-path="notification/README.html">
            
                
                    <a href="../notification/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                         notification
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="9" data-path="nstimer/README.html">
            
                
                    <a href="../nstimer/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                         nstimer
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="10" data-path="oc/README.html">
            
                
                    <a href="../oc/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                         OC
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11" data-path="rac/README.html">
            
                
                    <a href="../rac/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                         rac
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="12" data-path="review1/README.html">
            
                
                    <a href="../review1/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                         review1
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="13" data-path="review2/README.html">
            
                
                    <a href="../review2/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>13.</b>
                        
                         review2
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="14" data-path="audio/README.html">
            
                
                    <a href="../audio/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.</b>
                        
                         audio
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="15" data-path="twocode/README.html">
            
                
                    <a href="../twocode/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>15.</b>
                        
                         twocode
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="16" data-path="memory/README.html">
            
                
                    <a href="../memory/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>16.</b>
                        
                         memory
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="17" data-path="bluetooth/README.html">
            
                
                    <a href="../bluetooth/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>17.</b>
                        
                         bluetooth
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="18" data-path="touchid/README.html">
            
                
                    <a href="../touchid/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>18.</b>
                        
                         touchid
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="19" data-path="uiviewcontroller/README.html">
            
                
                    <a href="../uiviewcontroller/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>19.</b>
                        
                         UIViewController
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="20" data-path="delegate_kvo/README.html">
            
                
                    <a href="../delegate_kvo/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>20.</b>
                        
                         delegate kvo
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="21" data-path="datasave/README.html">
            
                
                    <a href="../datasave/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>21.</b>
                        
                         dataSave
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="22" data-path="pickerview/README.html">
            
                
                    <a href="../pickerview/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>22.</b>
                        
                         pickerView
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="23" data-path="quartz2d/README.html">
            
                
                    <a href="../quartz2d/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>23.</b>
                        
                         quartz2D
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="24" data-path="uitextfield/README.html">
            
                
                    <a href="../uitextfield/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>24.</b>
                        
                         UITextField
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="25" data-path="uidynamic/README.html">
            
                
                    <a href="../uidynamic/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>25.</b>
                        
                         UIDynamic
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="26" data-path="coreanimation/README.html">
            
                
                    <a href="../coreanimation/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>26.</b>
                        
                         coreAnimation
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="27" data-path="cocoapods/README.html">
            
                
                    <a href="../cocoapods/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>27.</b>
                        
                         Cocoapods
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="28" data-path="thread/README.html">
            
                
                    <a href="../thread/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>28.</b>
                        
                         Thread
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="29" data-path="network/README.html">
            
                
                    <a href="../network/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>29.</b>
                        
                         network
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Mou</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_37">
                    
                        <h1 id="uiviewcontroller">UIViewController</h1>
<p>控制器常见的创建方式有以下几种</p>
<ul>
<li>通过storyboard创建控制器<pre><code class="lang-objc">先加载storyboard文件，(Main是storyboard文件名不需要带后缀)
- <span class="hljs-literal">nil</span>:  [<span class="hljs-built_in">NSBundle</span> mainBundle]
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:<span class="hljs-string">@"Main"</span> bundle:<span class="hljs-literal">nil</span>];
<span class="hljs-comment">//初始化storyboard中的控制器(加载箭头指向的控制器)</span>
<span class="hljs-built_in">UIViewController</span> *vc = [storyboard instantiateInitialViewController];
<span class="hljs-comment">//通过加载标识初始化对应控制器</span>
<span class="hljs-built_in">UIViewController</span> *vc = [storyboard instantiateViewControllerWithIdentifier:<span class="hljs-string">@"green"</span>];
</code></pre>
</li>
<li>直接创建<pre><code class="lang-objc">MJViewController *mj = [[MJViewController alloc] init];
</code></pre>
</li>
<li><p>通过xib创建</p>
<pre><code class="lang-objc">XMGViewController *xmgVc = [[XMGViewController alloc] initWithNibName:<span class="hljs-string">@"XMGViewController"</span> bundle:<span class="hljs-literal">nil</span>];
</code></pre>
<ul>
<li>如果描述控制器View的xib跟控制器的类名相同，就会去加载</li>
<li>控制器的init方法底层会调用initWithNibName:bundle:</li>
<li>只要通过initWithNibName:bundle:初始化控制器,并且nibName为nil,就会执行以下几步。<ul>
<li>XMGViewController类型</li>
<li>1.寻找有没有跟控制器类名同名但是不带Controller的xib，如果有就会去加载（XMGView.xib）</li>
<li>2.寻找有没有跟控制器类名同名的xib，如果有就会去加载(XMGViewController.xib)</li>
<li>3.如果都没有找到，创建空的view</li>
</ul>
</li>
</ul>
</li>
<li><p>loadView作用：自定义控制器的view</p>
</li>
<li>loadView什么时候调用：当控制器的view没有创建的时候，就会调用loadView去创建控制器的view</li>
<li>注意：在这个方法中如果没有自定义view,就不能获取控制器的view,会造成死循环</li>
<li>一旦重写了这个方法，就不要调用[super loadView]</li>
<li>如果重写了这个方法，就不会去加载storyboard描述的控制器的View</li>
<li><p>控制器view默认颜色是clearColor 几乎透明色</p>
</li>
<li><p>创建UIViewController控制器，控制器的view并没有创建</p>
</li>
<li>控制器的view懒加载：第一次使用的时候才会去加载，并不是创建UIViewController控制器的时候去加载，可以用isViewLoaded方法判断一个UIViewController的view是否已经被加载</li>
<li>在viewDidLoad中打印控制器的尺寸不准确，通常在viewDidAppear</li>
<li><p>控制器的view加载完毕就会调用viewDidLoad方法
，通常在此方法中执行视图控制器的初始化工作</p>
</li>
<li><p>UINavigationController以栈的形式保存子控制器</p>
</li>
<li>导航栏的内容由栈顶控制器的navigationItem属性决定</li>
<li>栈底控制器也叫导航控制器的根控制器</li>
<li>显示到导航控制器的永远是栈顶控制器的view</li>
<li>topViewController获取栈顶控制器</li>
<li>viewControllers和childViewControllers压入栈的控制器都会作为导航控制器的子控制器</li>
<li>导航条上的返回按钮由上一个控制器决定。<ul>
<li>如果上一个控制器没有设置标题,默认back</li>
<li>如果上一个控制器设置标题,并且没有超过12个字符,默认返 回标题和上一个控制器一致,如果超过12个字符,就会变成back。</li>
<li>还可以主动直接设置下一个界面的返回按钮,设置上一个控制 器的backBarButtonItem属性</li>
</ul>
</li>
</ul>
<h1 id="segue">什么是Segue</h1>
<ul>
<li>Storyboard上每一根用来界面跳转的线，都是一个UIStoryboardSegue对象（简称Segue）</li>
<li><p>每一个Segue对象，都有3个属性
唯一标识
@property (nonatomic, readonly) NSString *identifier;
来源控制器
@property (nonatomic, readonly) id sourceViewController;
目标控制器
@property (nonatomic, readonly) id destinationViewController;</p>
</li>
<li><p>根据Segue的执行（跳转）时刻，Segue可以分为2大类型</p>
<ul>
<li><p>自动型：点击某个控件后（比如按钮），自动执行Segue，自动完成界面跳转</p>
</li>
<li><p>手动型：需要通过写代码手动执行Segue，才能完成界面跳转</p>
</li>
</ul>
</li>
<li><p>自动型Segue</p>
<ul>
<li>按住Control键，直接从控件拖线到目标控制器
如果点击某个控件后，不需要做任何判断，一定要跳转到下一个界面，建议使用“自动型Segue”</li>
</ul>
</li>
<li>手动型Segue<ul>
<li>按住Control键，从来源控制器拖线到目标控制器<pre><code class="lang-objc">在恰当的时刻，使用perform方法执行对应的Segue
<span class="hljs-comment">//Segue必须由来源控制器来执行，也就是说，这个perform方法必须由来源控制器来调用</span>
[<span class="hljs-keyword">self</span> performSegueWithIdentifier:<span class="hljs-string">@"login2contacts"</span> sender:<span class="hljs-literal">nil</span>];
</code></pre>
</li>
</ul>
</li>
<li>如果点击某个控件后，需要做一些判断，也就是说：满足一定条件后才跳转到下一个界面，建议使用“手动型Segue”</li>
<li>利用performSegueWithIdentifier:方法可以执行某个Segue，完成界面跳转<ul>
<li>接下来研究performSegueWithIdentifier:sender:方法的完整执行过程
[self performSegueWithIdentifier:@“login2contacts” sender:nil];
// 这个self是来源控制器
根据identifier去storyboard中找到对应的线，新建UIStoryboardSegue对象
设置Segue对象的sourceViewController（来源控制器）
新建并且设置Segue对象的destinationViewController（目标控制器）
调用sourceViewController的下面方法，做一些跳转前的准备工作并且传入创建好的Segue对象</li>
</ul>
</li>
<li>(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender;
// 这个sender是当初performSegueWithIdentifier:sender:中传入的sender
调用Segue对象的- (void)perform;方法开始执行界面跳转操作
如果segue的style是push
取得sourceViewController所在的UINavigationController
调用UINavigationController的push方法将destinationViewController压入栈中，完成跳转
如果segue的style是modal
调用sourceViewController的presentViewController方法将destinationViewController展示出来</li>
</ul>
<p>// 通过setTintColor设置导航条返回按钮的颜色
[bar setTintColor:[UIColor whiteColor]];
//可以跳转返回按钮文字的偏移量
[[UIBarButtonItem appearance] setBackButtonTitlePositionAdjustment:UIOffsetMake(0, -100) forBarMetrics:UIBarMetricsDefault];</p>
<h2 id="">控制器父子关系的建立原则</h2>
<ul>
<li>如果2个控制器的view是父子关系(不管是直接还是间接的父子关系)，那么这2个控制器也应该为父子关系</li>
</ul>
<pre><code class="lang-objc">[a<span class="hljs-variable">.view</span> addSubview:b<span class="hljs-variable">.view</span>];
[a addChildViewController:b];
<span class="hljs-comment">// 或者</span>
[a<span class="hljs-variable">.view</span> addSubview:otherView];
[otherView addSubbiew<span class="hljs-variable">.b</span><span class="hljs-variable">.view</span>];
[a addChildViewController:b];
</code></pre>
<h2 id="">获得所有的子控制器</h2>
<pre><code class="lang-objc"><span class="hljs-keyword">@property</span>(<span class="hljs-keyword">nonatomic</span>,<span class="hljs-keyword">readonly</span>) <span class="hljs-built_in">NSArray</span> *childViewControllers;
</code></pre>
<h2 id="">添加一个子控制器</h2>
<pre><code class="lang-objc"><span class="hljs-comment">//XMGOneViewController成为了self的子控制器</span>
<span class="hljs-comment">//self成为了XMGOneViewController的父控制器</span>
[<span class="hljs-keyword">self</span> addChildViewController:[[XMGOneViewController alloc] init]];
<span class="hljs-comment">// 通过addChildViewController添加的控制器都会存在于childViewControllers数组中</span>
</code></pre>
<h2 id="">获得父控制器</h2>
<pre><code class="lang-objc"><span class="hljs-keyword">@property</span>(<span class="hljs-keyword">nonatomic</span>,<span class="hljs-keyword">readonly</span>) <span class="hljs-built_in">UIViewController</span> *parentViewController;
</code></pre>
<h2 id="">将一个控制器从它的父控制器中移除</h2>
<pre><code class="lang-objc"><span class="hljs-comment">// 控制器a从它的父控制器中移除</span>
[a removeFromParentViewController];
</code></pre>
<h2 id="static">static的作用：</h2>
<ul>
<li><p>修饰局部变量</p>
<ul>
<li>让局部变量只初始化一次</li>
<li>局部变量在程序中只有一份内存</li>
<li>并不会改变局部变量的作用域，仅仅是改变了局部变量的生命周期（只到程序结束，这个局部变量才会销毁）</li>
</ul>
</li>
<li><p>修饰全局变量</p>
<ul>
<li>全局变量的作用域仅限于当前文件</li>
</ul>
</li>
</ul>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../touchid/README.html" class="navigation navigation-prev " aria-label="Previous page: touchid"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../delegate_kvo/README.html" class="navigation navigation-next " aria-label="Next page: delegate kvo"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="https://cdn.mathjax.org/mathjax/2.4-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
